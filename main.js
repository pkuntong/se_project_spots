!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},t=(e,t,o)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(o.inputErrorClass)},o=(e,t,o)=>{(e=>e.some((e=>!e.validity.valid)))(e)?((e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)})(t,o):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},r=new class{constructor(e){let{baseUrl:t,headers:o}=e;this._baseUrl=t,this._headers=o}getAppInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}request(e,t){return fetch(e,t).then(this.checkResponse)}getInitialCards(){return this.request(`${this._baseUrl}/cards`,{headers:this._headers})}getUserInfo(){return this.request(`${this._baseUrl}/users/me`,{headers:this._headers})}editUserInfo(e){let{name:t,about:o}=e;return this.request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:o})})}editAvatarInfo(e){return this.request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}addCard(e){let{name:t,link:o}=e;return this.request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:o})})}deleteCard(e){return this.request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}changeLikeStatus(e,t){return this.request(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"9761a594-3fe1-46bc-8b2b-b1c551adb983","Content-Type":"application/json"}});r.getAppInfo().then((e=>{let[t,o]=e;t.forEach((e=>{const t=m(e);l.list.append(t)})),n.nameElement.textContent=o.name,n.jobElement.textContent=o.about,f.src=o.avatar})).catch((e=>console.error(e)));const n={editButton:document.querySelector(".profile__edit-button"),modal:document.querySelector("#edit-profile-modal"),closeButton:document.querySelector("#close-profile-modal"),form:document.querySelector("#edit-profile-form"),nameInput:document.querySelector("#edit-profile-input-name"),jobInput:document.querySelector("#edit-profile-input-description"),nameElement:document.querySelector(".profile__title"),jobElement:document.querySelector(".profile__description")},a={button:document.querySelector(".profile__add-button"),modal:document.querySelector("#new-post-modal"),closeButton:document.querySelector("#close-new-post-modal"),linkInput:document.querySelector("#new-post-image-link"),nameInput:document.querySelector("#new-post-input-description"),form:document.querySelector("#new-post-form")},l={template:document.querySelector("#card-template"),list:document.querySelector(".cards__list"),modal:document.querySelector("#preview-modal"),modalImage:document.querySelector(".modal__image"),modalCloseButton:document.querySelector(".modal__close-button"),modalCaption:document.querySelector(".modal__caption")};function s(e){e.classList.add("modal_opened"),document.addEventListener("keydown",c),e.addEventListener("click",d),e.addEventListener("click",u)}function i(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",c),e.removeEventListener("click",d),e.removeEventListener("click",u)}const c=e=>{if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&i(e)}},d=e=>{e.target.classList.contains("modal")&&i(e.currentTarget)},u=e=>{e.target.classList.contains("modal__close-button")&&i(e.currentTarget)};function m(e){const t=l.template.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image"),a=t.querySelector(".card__like-button"),i=t.querySelector(".card__delete-button"),c=e._id;return o.textContent=e.name,n.src=e.link,n.alt=e.name,e.isLiked&&a.classList.add("card__like-button_liked"),a.addEventListener("click",(()=>{a.classList.contains("card__like-button_liked")?r.deleteLike(c).then((()=>{a.classList.remove("card__like-button_liked")})).catch((e=>console.error(`Error: ${e}`))):r.addLike(c).then((()=>{a.classList.add("card__like-button_liked")})).catch((e=>console.error(`Error: ${e}`)))})),i.addEventListener("click",(()=>{k=t,C=c,s(y)})),n.addEventListener("click",(()=>{l.modalCaption.textContent=e.name,l.modalImage.src=e.link,l.modalImage.alt=e.name,s(l.modal)})),t}editProfileButton.addEventListener("click",(()=>{var o,r,n;nameInput.value=profileName.textContent,descriptionInput.value=profileDescription.textContent,o=editProfileForm,r=[nameInput,descriptionInput],n=e,r.forEach((e=>{t(o,e,n)})),s(editProfileModal)})),n.closeButton.addEventListener("click",(()=>{i(n.modal)})),a.button.addEventListener("click",(()=>{s(a.modal)})),a.closeButton.addEventListener("click",(()=>{i(a.modal)})),n.form.addEventListener("submit",(function(e){e.preventDefault();const t=n.form.querySelector(".modal__submit-button"),o=t.textContent;t.textContent="Saving...",r.editUserInfo({name:n.nameInput.value,about:n.jobInput.value}).then((e=>{n.nameElement.textContent=e.name,n.jobElement.textContent=e.about,i(n.modal)})).catch((e=>console.error(`Error: ${e}`))).finally((()=>{t.textContent=o}))})),a.form.addEventListener("submit",(function(e){e.preventDefault();const t=a.form.querySelector(".modal__submit-button"),o=t.textContent;t.textContent="Saving...",r.addNewCard({name:a.nameInput.value,link:a.linkInput.value}).then((e=>{const t=m(e);l.list.prepend(t),a.form.reset(),i(a.modal)})).catch((e=>console.error(`Error: ${e}`))).finally((()=>{t.textContent=o}))})),l.modalCloseButton.addEventListener("click",(()=>{i(l.modal)}));const _=document.querySelector("#edit-avatar-modal"),p=_.querySelector(".modal__form"),h=document.querySelector(".profile__avatar-button"),v=(_.querySelector(".modal__submit-button"),_.querySelector(".modal__close-button")),b=_.querySelector("#edit-avatar-input-link"),f=document.querySelector(".profile__avatar");h.addEventListener("click",(()=>{s(_)})),v.addEventListener("click",(()=>{i(_)})),p.addEventListener("submit",(e=>{e.preventDefault();const t=p.querySelector(".modal__submit-button"),o=t.textContent;t.textContent="Saving...";const n=b.value;r.editAvatar(n).then((e=>{f.src=e.avatar,i(_)})).catch((e=>console.error(`Error: ${e}`))).finally((()=>{t.textContent=o}))}));const y=document.querySelector("#delete-modal"),S=document.querySelector("#delete-modal-form"),q=document.querySelector(".modal__cancel-button"),E=document.querySelector("#close-delete-modal");let k,C;var L;S.addEventListener("submit",(e=>{e.preventDefault();const t=S.querySelector(".modal__submit-button"),o=t.textContent;t.textContent="Deleting...",r.deleteCard(C).then((()=>{k.remove(),i(y)})).catch((e=>console.error(`Error: ${e}`))).finally((()=>{t.textContent=o}))})),q.addEventListener("click",(()=>i(y))),E.addEventListener("click",(()=>i(y))),L=validationConfig,document.querySelectorAll(L.formSelector).forEach((e=>{((e,r)=>{const n=Array.from(e.querySelectorAll(r.inputSelector)),a=e.querySelector(r.submitButtonSelector);console.log(n),console.log(a),o(n,a,r),n.forEach((l=>{l.addEventListener("input",(function(){((e,o,r)=>{o.validity.valid?t(e,o,r):((e,t,o,r)=>{const n=e.querySelector(`#${t.id}-error`);t.classList.add(r.inputErrorClass),n.textContent=o})(e,o,o.validationMessage,r)})(e,l,r),o(n,a,r)}))}))})(e,L)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFZWSxpQkFBaUIsU0FBUyxJQUFNSSxFQUFXc0IsS0RwT3BCcEgsRUN1T2xCOEksaUJEdE9JbEUsU0FBU21FLGlCQUFpQi9JLEVBQU9ULGNBQ3pDb0UsU0FBUzdELElBckJNa0osRUFBQ2xKLEVBQWFFLEtBQ3RDLE1BQU1PLEVBQVkwSSxNQUFNQyxLQUN0QnBKLEVBQVlpSixpQkFBaUIvSSxFQUFPUixnQkFFaENnQixFQUFnQlYsRUFBWUcsY0FBY0QsRUFBT1Asc0JBRXZEZ0YsUUFBUTBFLElBQUk1SSxHQUNaa0UsUUFBUTBFLElBQUkzSSxHQUVaRixFQUFrQkMsRUFBV0MsRUFBZVIsR0FFNUNPLEVBQVVvRCxTQUFTNUQsSUFDakJBLEVBQWEyRixpQkFBaUIsU0FBUyxXQW5EaEIwRCxFQUFDdEosRUFBYUMsRUFBY0MsS0FDaERELEVBQWFXLFNBQVNDLE1BUXpCZCxFQUFlQyxFQUFhQyxFQUFjQyxHQXJCdkJxSixFQUFDdkosRUFBYUMsRUFBY3VKLEVBQWN0SixLQUMvRCxNQUFNdUosRUFBZXpKLEVBQVlHLGNBQWMsSUFBSUYsRUFBYUcsWUFDaEVILEVBQWFLLFVBQVVXLElBQUlmLEVBQU9MLGlCQUNsQzRKLEVBQWFwSixZQUFjbUosQ0FBWSxFQVdyQ0QsQ0FDRXZKLEVBQ0FDLEVBQ0FBLEVBQWF5SixrQkFDYnhKLEVBSUosRUEwQ0lvSixDQUFtQnRKLEVBQWFDLEVBQWNDLEdBQzlDTSxFQUFrQkMsRUFBV0MsRUFBZVIsRUFDOUMsR0FBRSxHQUNGLEVBTUFnSixDQUFrQmxKLEVBQWFFLEVBQU8sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICAgIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idG5cIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnRuX2luYWN0aXZlXCIsXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcbiAgfTtcbiAgXG4gIGNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgY29uZmlnKSA9PiB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgfTtcbiAgXG4gIGNvbnN0IGhpZGVJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICB9O1xuICBcbiAgY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICBzaG93SW5wdXRFcnJvcihcbiAgICAgICAgZm9ybUVsZW1lbnQsXG4gICAgICAgIGlucHV0RWxlbWVudCxcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLFxuICAgICAgICBjb25maWdcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGNvbmZpZyk7XG4gICAgfVxuICB9O1xuICBcbiAgY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfTtcbiAgXG4gIGV4cG9ydCBjb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH07XG4gIFxuICBjb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICAgIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIH1cbiAgfTtcbiAgXG4gIGV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsZW1lbnQsIGlucHV0TGlzdCwgY29uZmlnKSA9PiB7XG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXQsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH07XG4gIFxuICBjb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWxlbWVudCwgY29uZmlnKSA9PiB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICBcbiAgICBjb25zb2xlLmxvZyhpbnB1dExpc3QpO1xuICAgIGNvbnNvbGUubG9nKGJ1dHRvbkVsZW1lbnQpO1xuICBcbiAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gIFxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG4gIFxuICBleHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcbiAgICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gICAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9O1xuICAiLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHtcbiAgZW5hYmxlVmFsaWRhdGlvbixcbiAgc2V0dGluZ3MsXG4gIHJlc2V0VmFsaWRhdGlvbixcbiAgZGlzYWJsZUJ1dHRvbixcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuaW1wb3J0IHsgaGFuZGxlU3VibWl0IH0gZnJvbSBcIi4uL3V0aWxzL2hlbHBlcnNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xuXG5sZXQgc2VsZWN0ZWRDYXJkLCBzZWxlY3RlZENhcmRJZDtcblxuLy8gQVBJXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI5NzYxYTU5NC0zZmUxLTQ2YmMtOGIyYi1iMWM1NTFhZGI5ODNcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG5cbmFwaVxuICAuZ2V0QXBwSW5mbygpXG4gIC50aGVuKChbY2FyZHMsIHVzZXJJbmZvXSkgPT4ge1xuICAgIGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoY2FyZCk7XG4gICAgICBjYXJkRWxlbWVudHMubGlzdC5hcHBlbmQoY2FyZEVsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgcHJvZmlsZUVsZW1lbnRzLm5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdXNlckluZm8ubmFtZTtcbiAgICBwcm9maWxlRWxlbWVudHMuam9iRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJJbmZvLmFib3V0O1xuICAgIHByb2ZpbGVBdmF0YXJJbWFnZS5zcmMgPSB1c2VySW5mby5hdmF0YXI7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuXG4vLyBQcm9maWxlIEVsZW1lbnRzXG5jb25zdCBwcm9maWxlRWxlbWVudHMgPSB7XG4gIGVkaXRCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIiksXG4gIG1vZGFsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1tb2RhbFwiKSxcbiAgY2xvc2VCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2xvc2UtcHJvZmlsZS1tb2RhbFwiKSxcbiAgZm9ybTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtZm9ybVwiKSxcbiAgbmFtZUlucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1pbnB1dC1uYW1lXCIpLFxuICBqb2JJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtaW5wdXQtZGVzY3JpcHRpb25cIiksXG4gIG5hbWVFbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpLFxuICBqb2JFbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpLFxufTtcblxuLy8gTmV3IFBvc3QgRWxlbWVudHNcbmNvbnN0IG5ld1Bvc3RFbGVtZW50cyA9IHtcbiAgYnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIiksXG4gIG1vZGFsOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1wb3N0LW1vZGFsXCIpLFxuICBjbG9zZUJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjbG9zZS1uZXctcG9zdC1tb2RhbFwiKSxcbiAgbGlua0lucHV0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1wb3N0LWltYWdlLWxpbmtcIiksXG4gIG5hbWVJbnB1dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXctcG9zdC1pbnB1dC1kZXNjcmlwdGlvblwiKSxcbiAgZm9ybTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXctcG9zdC1mb3JtXCIpLFxufTtcblxuLy8gQ2FyZCBFbGVtZW50c1xuY29uc3QgY2FyZEVsZW1lbnRzID0ge1xuICB0ZW1wbGF0ZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLFxuICBsaXN0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpLFxuICBtb2RhbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpLFxuICBtb2RhbEltYWdlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKSxcbiAgbW9kYWxDbG9zZUJ1dHRvbjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpLFxuICBtb2RhbENhcHRpb246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIiksXG59O1xuXG4vLyBVdGlsaXR5IEZ1bmN0aW9uc1xuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlTW9kYWxPbkVzYyk7XG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZU1vZGFsT25PdmVybGF5Q2xpY2spO1xuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VNb2RhbE9uQnV0dG9uQ2xpY2spO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlTW9kYWxPbkVzYyk7XG4gIG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjbG9zZU1vZGFsT25PdmVybGF5Q2xpY2spO1xuICBtb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VNb2RhbE9uQnV0dG9uQ2xpY2spO1xufVxuXG5jb25zdCBjbG9zZU1vZGFsT25Fc2MgPSAoZXZlbnQpID0+IHtcbiAgaWYgKGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGNvbnN0IG9wZW5lZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XG4gICAgaWYgKG9wZW5lZE1vZGFsKSBjbG9zZU1vZGFsKG9wZW5lZE1vZGFsKTtcbiAgfVxufTtcblxuY29uc3QgY2xvc2VNb2RhbE9uT3ZlcmxheUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcbiAgICBjbG9zZU1vZGFsKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xuICB9XG59O1xuXG5jb25zdCBjbG9zZU1vZGFsT25CdXR0b25DbGljayA9IChldmVudCkgPT4ge1xuICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZS1idXR0b25cIikpIHtcbiAgICBjbG9zZU1vZGFsKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xuICB9XG59O1xuXG4vLyBFdmVudCBMaXN0ZW5lcnNcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBkZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICByZXNldFZhbGlkYXRpb24oZWRpdFByb2ZpbGVGb3JtLCBbbmFtZUlucHV0LCBkZXNjcmlwdGlvbklucHV0XSwgc2V0dGluZ3MpO1xuICBvcGVuTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG59KTtcblxucHJvZmlsZUVsZW1lbnRzLmNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwocHJvZmlsZUVsZW1lbnRzLm1vZGFsKTtcbn0pO1xuXG5uZXdQb3N0RWxlbWVudHMuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG9wZW5Nb2RhbChuZXdQb3N0RWxlbWVudHMubW9kYWwpO1xufSk7XG5cbm5ld1Bvc3RFbGVtZW50cy5jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKG5ld1Bvc3RFbGVtZW50cy5tb2RhbCk7XG59KTtcblxucHJvZmlsZUVsZW1lbnRzLmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5uZXdQb3N0RWxlbWVudHMuZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZU5ld1Bvc3RGb3JtU3VibWl0KTtcblxuY2FyZEVsZW1lbnRzLm1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChjYXJkRWxlbWVudHMubW9kYWwpO1xufSk7XG5cbi8vIEZvcm0gU3VibWlzc2lvbiBIYW5kbGVyc1xuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCBzdWJtaXRCdXR0b24gPSBwcm9maWxlRWxlbWVudHMuZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgIFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCJcbiAgKTtcbiAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuXG4gIGFwaVxuICAgIC5lZGl0VXNlckluZm8oe1xuICAgICAgbmFtZTogcHJvZmlsZUVsZW1lbnRzLm5hbWVJbnB1dC52YWx1ZSxcbiAgICAgIGFib3V0OiBwcm9maWxlRWxlbWVudHMuam9iSW5wdXQudmFsdWUsXG4gICAgfSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcHJvZmlsZUVsZW1lbnRzLm5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgICAgcHJvZmlsZUVsZW1lbnRzLmpvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xuICAgICAgY2xvc2VNb2RhbChwcm9maWxlRWxlbWVudHMubW9kYWwpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoYEVycm9yOiAke2Vycn1gKSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQ7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU5ld1Bvc3RGb3JtU3VibWl0KGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gbmV3UG9zdEVsZW1lbnRzLmZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiXG4gICk7XG4gIGNvbnN0IG9yaWdpbmFsVGV4dCA9IHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcblxuICBhcGlcbiAgICAuYWRkTmV3Q2FyZCh7XG4gICAgICBuYW1lOiBuZXdQb3N0RWxlbWVudHMubmFtZUlucHV0LnZhbHVlLFxuICAgICAgbGluazogbmV3UG9zdEVsZW1lbnRzLmxpbmtJbnB1dC52YWx1ZSxcbiAgICB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGRhdGEpO1xuICAgICAgY2FyZEVsZW1lbnRzLmxpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gICAgICBuZXdQb3N0RWxlbWVudHMuZm9ybS5yZXNldCgpO1xuICAgICAgY2xvc2VNb2RhbChuZXdQb3N0RWxlbWVudHMubW9kYWwpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoYEVycm9yOiAke2Vycn1gKSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQ7XG4gICAgfSk7XG59XG5cbi8vIENhcmQgQ3JlYXRpb24gRnVuY3Rpb25cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkRWxlbWVudHMudGVtcGxhdGUuY29udGVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuICBjb25zdCBjYXJkVGl0bGUgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gIGNvbnN0IGNhcmREZWxldGVCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG5cbiAgY29uc3QgY2FyZElEID0gZGF0YS5faWQ7XG4gIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgY2FyZEltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgY2FyZEltYWdlLmFsdCA9IGRhdGEubmFtZTtcblxuICBpZiAoZGF0YS5pc0xpa2VkKSB7XG4gICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2xpa2VkXCIpO1xuICB9XG5cbiAgY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjb25zdCBpc0xpa2VkID0gY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFxuICAgICAgXCJjYXJkX19saWtlLWJ1dHRvbl9saWtlZFwiXG4gICAgKTtcblxuICAgIGlmIChpc0xpa2VkKSB7XG4gICAgICBhcGlcbiAgICAgICAgLmRlbGV0ZUxpa2UoY2FyZElEKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2xpa2VkXCIpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihgRXJyb3I6ICR7ZXJyfWApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpXG4gICAgICAgIC5hZGRMaWtlKGNhcmRJRClcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9saWtlZFwiKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoYEVycm9yOiAke2Vycn1gKSk7XG4gICAgfVxuICB9KTtcblxuICBjYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY3VycmVudENhcmRFbGVtZW50ID0gY2FyZEVsZW1lbnQ7XG4gICAgY3VycmVudENhcmRJRCA9IGNhcmRJRDtcbiAgICBvcGVuTW9kYWwoZGVsZXRlTW9kYWwpO1xuICB9KTtcblxuICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkRWxlbWVudHMubW9kYWxDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIGNhcmRFbGVtZW50cy5tb2RhbEltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgICBjYXJkRWxlbWVudHMubW9kYWxJbWFnZS5hbHQgPSBkYXRhLm5hbWU7XG4gICAgb3Blbk1vZGFsKGNhcmRFbGVtZW50cy5tb2RhbCk7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuLy8gRWRpdCBBdmF0YXIgTW9kYWxcbmNvbnN0IGF2YXRhck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWF2YXRhci1tb2RhbFwiKTtcbmNvbnN0IGF2YXRhckZvcm0gPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgYXZhdGFyUHJvZmlsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyLWJ1dHRvblwiKTtcbmNvbnN0IGF2YXRhclN1Ym1pdEJ1dHRvbiA9IGF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIik7XG5jb25zdCBhdmF0YXJNb2RhbENsb3NlQnV0dG9uID0gYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXG4pO1xuY29uc3QgYXZhdGFySW5wdXQgPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtYXZhdGFyLWlucHV0LWxpbmtcIik7XG5jb25zdCBwcm9maWxlQXZhdGFySW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcblxuYXZhdGFyUHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwoYXZhdGFyTW9kYWwpO1xufSk7XG5cbmF2YXRhck1vZGFsQ2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChhdmF0YXJNb2RhbCk7XG59KTtcblxuYXZhdGFyRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGF2YXRhckZvcm0ucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiKTtcbiAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuXG4gIGNvbnN0IGF2YXRhclVybCA9IGF2YXRhcklucHV0LnZhbHVlO1xuXG4gIGFwaVxuICAgIC5lZGl0QXZhdGFyKGF2YXRhclVybClcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgcHJvZmlsZUF2YXRhckltYWdlLnNyYyA9IGRhdGEuYXZhdGFyO1xuICAgICAgY2xvc2VNb2RhbChhdmF0YXJNb2RhbCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihgRXJyb3I6ICR7ZXJyfWApKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IG9yaWdpbmFsVGV4dDtcbiAgICB9KTtcbn0pO1xuXG4vLyBEZWxldGUgTW9kYWxcbmNvbnN0IGRlbGV0ZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtbW9kYWxcIik7XG5jb25zdCBkZWxldGVNb2RhbEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1tb2RhbC1mb3JtXCIpO1xuY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FuY2VsLWJ1dHRvblwiKTtcbmNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjbG9zZS1kZWxldGUtbW9kYWxcIik7XG5cbmxldCBjdXJyZW50Q2FyZEVsZW1lbnQ7XG5sZXQgY3VycmVudENhcmRJRDtcblxuZGVsZXRlTW9kYWxGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gZGVsZXRlTW9kYWxGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idXR0b25cIik7XG4gIGNvbnN0IG9yaWdpbmFsVGV4dCA9IHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJEZWxldGluZy4uLlwiO1xuXG4gIGFwaVxuICAgIC5kZWxldGVDYXJkKGN1cnJlbnRDYXJkSUQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY3VycmVudENhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgY2xvc2VNb2RhbChkZWxldGVNb2RhbCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihgRXJyb3I6ICR7ZXJyfWApKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IG9yaWdpbmFsVGV4dDtcbiAgICB9KTtcbn0pO1xuXG5jYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNsb3NlTW9kYWwoZGVsZXRlTW9kYWwpKTtcbmNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZU1vZGFsKGRlbGV0ZU1vZGFsKSk7XG5cbi8vIEVuYWJsZSBGb3JtIFZhbGlkYXRpb25cbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvbkNvbmZpZyk7IiwiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGdldEFwcEluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcbiAgfVxuXG4gIGNoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3IgJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgcmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKHRoaXMuY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgfVxuXG4gIGVkaXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBhYm91dCxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgZWRpdEF2YXRhckluZm8oYXZhdGFyKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcixcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgbGluayxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChpZCkge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgY2hhbmdlTGlrZVN0YXR1cyhpZCwgaXNMaWtlZCkge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIkRFTEVURVwiIDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiY29uZmlnIiwicXVlcnlTZWxlY3RvciIsImlkIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsZW1lbnQiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsImFkZCIsImFwaSIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImJhc2VVcmwiLCJoZWFkZXJzIiwidGhpcyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJnZXRBcHBJbmZvIiwiUHJvbWlzZSIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsInJlamVjdCIsInN0YXR1cyIsInJlcXVlc3QiLCJ1cmwiLCJvcHRpb25zIiwiZmV0Y2giLCJ0aGVuIiwiZWRpdFVzZXJJbmZvIiwiX3JlZjIiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVkaXRBdmF0YXJJbmZvIiwiYXZhdGFyIiwiYWRkQ2FyZCIsIl9yZWYzIiwibGluayIsImRlbGV0ZUNhcmQiLCJjaGFuZ2VMaWtlU3RhdHVzIiwiaXNMaWtlZCIsImF1dGhvcml6YXRpb24iLCJjYXJkcyIsInVzZXJJbmZvIiwiZm9yRWFjaCIsImNhcmQiLCJjYXJkRWxlbWVudCIsImdldENhcmRFbGVtZW50IiwiY2FyZEVsZW1lbnRzIiwibGlzdCIsImFwcGVuZCIsInByb2ZpbGVFbGVtZW50cyIsIm5hbWVFbGVtZW50Iiwiam9iRWxlbWVudCIsInByb2ZpbGVBdmF0YXJJbWFnZSIsInNyYyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZWRpdEJ1dHRvbiIsImRvY3VtZW50IiwibW9kYWwiLCJjbG9zZUJ1dHRvbiIsImZvcm0iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsIm5ld1Bvc3RFbGVtZW50cyIsImJ1dHRvbiIsImxpbmtJbnB1dCIsInRlbXBsYXRlIiwibW9kYWxJbWFnZSIsIm1vZGFsQ2xvc2VCdXR0b24iLCJtb2RhbENhcHRpb24iLCJvcGVuTW9kYWwiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xvc2VNb2RhbE9uRXNjIiwiY2xvc2VNb2RhbE9uT3ZlcmxheUNsaWNrIiwiY2xvc2VNb2RhbE9uQnV0dG9uQ2xpY2siLCJjbG9zZU1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5Iiwib3BlbmVkTW9kYWwiLCJ0YXJnZXQiLCJjb250YWlucyIsImN1cnJlbnRUYXJnZXQiLCJkYXRhIiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRUaXRsZSIsImNhcmRJbWFnZSIsImNhcmRMaWtlQnV0dG9uIiwiY2FyZERlbGV0ZUJ1dHRvbiIsImNhcmRJRCIsIl9pZCIsImFsdCIsImRlbGV0ZUxpa2UiLCJhZGRMaWtlIiwiY3VycmVudENhcmRFbGVtZW50IiwiY3VycmVudENhcmRJRCIsImRlbGV0ZU1vZGFsIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJyZXNldFZhbGlkYXRpb24iLCJ2YWx1ZSIsInByb2ZpbGVOYW1lIiwiZGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbiIsImVkaXRQcm9maWxlRm9ybSIsImlucHV0IiwiZWRpdFByb2ZpbGVNb2RhbCIsInByZXZlbnREZWZhdWx0Iiwic3VibWl0QnV0dG9uIiwib3JpZ2luYWxUZXh0IiwiZmluYWxseSIsImFkZE5ld0NhcmQiLCJwcmVwZW5kIiwicmVzZXQiLCJhdmF0YXJNb2RhbCIsImF2YXRhckZvcm0iLCJhdmF0YXJQcm9maWxlQnV0dG9uIiwiYXZhdGFyTW9kYWxDbG9zZUJ1dHRvbiIsImF2YXRhcklucHV0IiwiYXZhdGFyVXJsIiwiZWRpdEF2YXRhciIsImRlbGV0ZU1vZGFsRm9ybSIsImNhbmNlbEJ1dHRvbiIsInZhbGlkYXRpb25Db25maWciLCJxdWVyeVNlbGVjdG9yQWxsIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJsb2ciLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsInZhbGlkYXRpb25NZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==